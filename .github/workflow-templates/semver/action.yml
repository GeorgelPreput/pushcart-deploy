name: semantic-release
description: Assign a semantic version and create release

inputs:
  github_token:
    description: GitHub Token
    required: true

runs:
  using: "composite"
  steps:
    - name: Set up Node.js
      uses: actions/setup-node@v3
      with:
        node-version: 20

    - name: Install dependencies
      shell: bash
      run: |
        if [ ! -e package-lock.json ]; then
          npm i
          fi
        npm ci
        npm install @semantic-release/git @semantic-release/changelog @google/semantic-release-replace-plugin -D

    - name: Run semantic-release
      shell: bash
      env:
        GITHUB_TOKEN: ${{ inputs.github_token }}
      run: npx semantic-release
